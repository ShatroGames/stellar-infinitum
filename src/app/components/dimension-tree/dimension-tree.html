<div class="dimension-container" [style.--dim-color]="dimension().color">
  <div class="dimension-header">
    <h3>{{ dimension().name }}</h3>
    <p class="dimension-desc">{{ dimension().description }}</p>
    <p class="dimension-mechanic">✦ {{ dimension().mechanic }}</p>
  </div>
  <div class="dimension-nodes">
    @for (row of nodesByRow(); track row[0]) {
      <div class="node-row" [attr.data-row]="row[0]">
        @for (node of row[1]; track node.id) {
          <div class="dimension-node {{ getNodeClass(node) }}" 
               [attr.data-node-id]="node.id"
               [attr.data-unlocked]="node.unlocked">
            <div class="node-icon">
              @if (node.level >= node.maxLevel) {
                ★
              } @else if (node.unlocked && canUpgrade(node.id)) {
                ✦
              } @else if (node.unlocked) {
                ✧
              } @else {
                ⊗
              }
            </div>
            <div class="node-content">
              <div class="node-header">
                <h4 class="node-name">{{ node.name }}</h4>
                <span class="node-level">{{ getNodeLevel(node) }}</span>
              </div>
              <p class="node-description">{{ getEffectDescription(node) }}</p>
              @if (node.unlocked && node.level < node.maxLevel) {
                <div class="node-cost">
                  Cost: {{ getNodeCost(node.id) }} EF
                </div>
              }
              @if (node.level >= node.maxLevel) {
                <div class="node-maxed-badge">MAXED</div>
              }
            </div>
            @if (node.unlocked && node.level < node.maxLevel) {
              <button class="btn-upgrade" 
                      (click)="onUpgrade(node.id)"
                      [disabled]="!canUpgrade(node.id)">
                Upgrade
              </button>
            }
          </div>
        }
      </div>
    }
  </div>
</div>