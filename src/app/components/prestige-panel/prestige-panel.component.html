<div class="prestige-panel">
  <div class="prestige-header">
    <h2>{{ currentTier()?.name || 'Stellar Stage' }}</h2>
    <div class="ascension-count">
      Warps: {{ totalAscensions() }}
      @if (prestigeBonus() > 1) {
        <span class="bonus-indicator">{{ formatBonus(prestigeBonus()) }}</span>
      }
    </div>
  </div>

  <div class="progress-section">
    <h3>Warp Progress</h3>

    <div class="points-progress">
      <div class="progress-label">
        <span>Energy:</span>
        <span>{{ formatNumber(progress().current) }} / {{ formatNumber(progress().required) }}</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="progress().percentage"></div>
      </div>
      <div class="progress-percentage">{{ progress().percentage.toFixed(1) }}%</div>
    </div>
  </div>

  @if (canAscend()) {
    <div class="ascend-ready">
      <p class="ready-message">ğŸ‰ Ready to Warp!</p>
      @if (nextTier()) {
        <p class="next-tier-info">
          Next: <strong>{{ nextTier()!.name }}</strong><br>
          <small>{{ nextTier()!.description }}</small><br>
          <small class="bonus-info">Bonus: {{ formatBonus(nextTier()!.prestigeBonus) }} to all production</small>
        </p>
        <button class="btn-ascend" (click)="onAscend()">
          ğŸŒŒ Warp to Next Stage
        </button>
      } @else {
        <p class="final-tier">ğŸŠ You've completed all 5 tiers!</p>
        <p class="ascension-unlock">Each completion of Tier 5 grants <strong>1 Ascension Point</strong> to spend on permanent upgrades!</p>
        <button class="btn-ascend" (click)="onAscend()">
          â­ Ascend
        </button>
      }
    </div>
  } @else {
    <div class="ascend-requirements">
      <p class="requirements-title">Requirements to Warp:</p>
      <ul>
        <li [class.complete]="allSkillsMaxed()">
          {{ allSkillsMaxed() ? 'âœ“' : 'â—‹' }} Max out all systems
        </li>
        <li [class.complete]="progress().percentage >= 100">
          {{ progress().percentage >= 100 ? 'âœ“' : 'â—‹' }} 
          Reach {{ formatNumber(progress().required) }} Energy
        </li>
      </ul>
    </div>
  }
</div>
