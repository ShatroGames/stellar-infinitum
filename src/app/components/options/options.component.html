<div class="options-container">
  <div class="options-header">
    <h2>âš™ Options</h2>
  </div>
  <div class="options-content">
    <section class="options-section">
      <h3>â–¸ Save Management</h3>
      <div class="button-group">
        <button class="btn btn-primary" (click)="saveGame()">
          <span class="btn-icon">â–¸</span>
          Save Game
        </button>
        <button class="btn btn-secondary" (click)="exportSave()">
          <span class="btn-icon">â†‘</span>
          Export Save to Clipboard
        </button>
        <button class="btn btn-secondary" (click)="openImportDialog()">
          <span class="btn-icon">â†“</span>
          Import Save
        </button>
      </div>
      @if (exportMessage) {
        <div class="message" [class.success]="exportMessage.includes('[âœ“]')" [class.error]="exportMessage.includes('[âœ—]')">
          {{ exportMessage }}
        </div>
      }
      <div class="info-box">
        <p><strong>Export:</strong> Copies your save data to clipboard as encoded text.</p>
        <p><strong>Import:</strong> Paste saved data to restore your progress.</p>
        <p><strong>Note:</strong> Keep your save data safe! Store it in a text file or note app.</p>
      </div>
    </section>
    <section class="options-section danger-zone">
      <h3>âš  Danger Zone</h3>
      <div class="button-group">
        <button class="btn btn-extreme-danger" (click)="fullReset()">
          <span class="btn-icon">ðŸ’€</span>
          FULL RESET (Including Achievements)
        </button>
      </div>
      <div class="warning-box">
        <p><strong>Reset All Progress:</strong> Permanently deletes all game progress but keeps achievements.</p>
        <p><strong>FULL RESET:</strong> Completely erases EVERYTHING including achievements and tutorials.</p>
        @if (hasEverWon()) {
          <p class="eternal-note">âœ¨ <strong>Eternal Progress:</strong> You have completed {{totalVictories()}} victory reset(s). This count persists across full resets for potential future features.</p>
        }
        <p>Make sure to export your save first if you want to keep a backup!</p>
      </div>
    </section>
  </div>
</div>
@if (showImportDialog) {
  <div class="dialog-overlay" (click)="closeImportDialog()">
    <div class="dialog-content" (click)="$event.stopPropagation()">
      <div class="dialog-header">
        <h3>â†“ Import Save Data</h3>
        <button class="btn-close" (click)="closeImportDialog()">Ã—</button>
      </div>
      <div class="dialog-body">
        <p>Paste your exported save data below:</p>
        <textarea 
          class="import-textarea" 
          [(ngModel)]="importText" 
          placeholder="Paste your save data here..."
          rows="8"></textarea>
        @if (importMessage) {
          <div class="message" [class.success]="importMessage.includes('[âœ“]')" [class.error]="importMessage.includes('[âœ—]')">
            {{ importMessage }}
          </div>
        }
      </div>
      <div class="dialog-footer">
        <button class="btn btn-secondary" (click)="closeImportDialog()">Cancel</button>
        <button class="btn btn-primary" (click)="importSave()">Import</button>
      </div>
    </div>
  </div>
}